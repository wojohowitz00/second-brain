---
phase: 07-menu-bar-interface
plan: 02
type: implementation
wave: 2
depends_on: ["07-01"]
files_modified:
  - backend/_scripts/menu_bar_app.py
  - backend/_scripts/notifications.py
autonomous: true

must_haves:
  truths:
    - "App shows macOS notification when new notes are filed"
    - "Notifications include note title and domain"
    - "Clicking notification opens note in Obsidian"
  artifacts:
    - path: "backend/_scripts/notifications.py"
      provides: "Notification helper using pync or osascript"
      min_lines: 40
---

<objective>
Add macOS native notifications when notes are filed, completing the UI experience.

Purpose: Users get passive feedback about filed notes without checking the menu bar.

Output: Notification system that shows toast when notes are processed.
</objective>

<execution_context>
@/Users/richardyu/.claude/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/phases/07-menu-bar-interface/07-01-PLAN.md
@backend/_scripts/menu_bar_app.py
</context>

<feature>
  <name>Notifications</name>
  <files>
    backend/_scripts/notifications.py
    backend/_scripts/menu_bar_app.py (update)
  </files>
  <behavior>
    macOS notifications when notes are filed:

    **Notification Content:**
    - Title: "Second Brain"
    - Subtitle: Note title (first 50 chars)
    - Body: "Filed to {domain}/{PARA}"
    - Click action: Open note in Obsidian

    Test cases:
    1. notify_note_filed() sends macOS notification
    2. Notification includes note title
    3. Notification includes domain
    4. Clicking notification opens Obsidian
    5. Notifications can be disabled via setting
  </behavior>
  <implementation>
    1. Use pync or subprocess with osascript for notifications
    2. Add notify_note_filed(title, domain, path) function
    3. Integrate with process_inbox.py after file creation
    4. Store notification preference in config
  </implementation>
</feature>

<verification>
```bash
cd /Users/richardyu/PARA/Personal/1_Projects/apps/second-brain/backend
uv run python -c "
from notifications import notify_note_filed

notify_note_filed('Test Note', 'Personal', '/path/to/note.md')
"
```
</verification>

<success_criteria>
1. Notification appears on macOS when note filed
2. Notification shows note title and domain
3. Can be toggled on/off
4. At least 5 test cases
</success_criteria>

<output>
After completion, create `.planning/phases/07-menu-bar-interface/07-02-SUMMARY.md`
</output>
